#setting pgvector+postgreSql

docker pull ankane/pgvector (This will install pgvector extension and postgres database)
docker volume create pgvector_data
docker images


Running postgres 

$ docker run --name pgvector-demo -e POSTGRES_PASSWORD=postgres -p 5432:5432  -d ankane/pgvector


docker pull dpage/pgadmin4

docker run --name pgadmin_container -p 5050:80 -e PGADMIN_DEFAULT_EMAIL=user@domain.com -e PGADMIN_DEFAULT_PASSWORD=password -d dpage/pgadmin4


Run in power shell
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' pgvector-demo

Windows command

docker inspect -f "{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}" pgvector-demo

Will give the IP address
172.17.0.2

http://localhost:5050

CREATE EXTENSION vector;


docker exec -it cc90bfcd5776 bash


https://colab.research.google.com/drive/1zh93oUlFV6KR3VNE7Mcm23G13G6oLGj8?usp=sharing#scrollTo=eQzHlPKGo94b




TO check


docker inspect -f "{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}" cc90bfcd5776 

docker run -p 5432:5432 ankane/pgvector

docker exec -it cc90bfcd5776 psql -U postgres

C:\Program Files\PostgreSQL\15\bin >psql --version


psql -h 172.17.0.2 -U postgres -d vector_db

CREATE DATABASE vector_db;
CREATE EXTENSION pgvector;
Referce

https://www.youtube.com/watch?v=DvURiNIvhxA&t=639s
https://colab.research.google.com/drive/1zh93oUlFV6KR3VNE7Mcm23G13G6oLGj8?usp=sharing#scrollTo=eQzHlPKGo94b
https://www.youtube.com/watch?v=FDBnyJu_Ndg
https://bugbytes.io/posts/vector-databases-pgvector-and-langchain/

SELECT document, (embedding <=> '[[0.013303189,-0.022953749,-0.030482369,0.005794278,0.0076337312,-0.0020201139,-0.014991544,0.010294369,-0.031796265,0.00074645673,0.025305621,-0.002590016,-0.010721385,-0.010241813,-0.00978195,0.002688558,0.02809108,-0.028143635,0.03155976,-0.010971025,-0.013979845,-0.016423691,0.010268091,0.018197449,-0.004197895,-0.004697175,0.032899935,-0.016357996,0.005902674,0.0024635536,-0.020050041,-0.016515663,-0.023755226,0.003284738,-0.008369513,-0.02593629,-0.015622214,0.0006840467,0.01466307,0.011168109,0.030902816,-0.001406689,0.013362315,0.009440337,-0.01229149,0.021140574,-0.019287981,-0.015214907,-0.022007745,0.0022270523,0.015477685,0.013336036,-0.03560656,-0.013506843,0.008290679,0.0057614306,-0.027066242,0.01577988,-0.016252885,-0.0072789793,0.0049763783,0.0036394896,-0.02832758,0.021271963,-0.03736718,-0.02357128,-0.02581804,0.005340984,0.015701048,-0.009354934,0.04425199,0.027565522,-0.0033307243,0.0018328838,0.017579919,-0.0062508564,-0.023728948,-0.011647681,-0.016949248,0.0119761545,0.007423508,-0.015044101,-0.011667389,-0.010635981,0.008047608,-0.00953888,-0.00539354,0.014098096,-0.006812547,-0.040940974,0.03739346,-0.0032962346,0.021337658,0.04924479,-0.01767189,-0.0035902187,-0.023242807,0.017645612,0.016528802,-0.03786646,0.01065569,-0.018985786,-0.02370267,-0.005140615,-0.017277721,0.009440337,-0.004716884,0.0049402458,0.022454469,0.01003816,-0.010642551,0.021968327,0.011982724,-0.03397733,0.019590179,-0.0160558,-0.014268902,-0.009578296,0.027381577,0.0016226606,-0.00076246983,0.0021400067,0.018223727,0.0011898964,0.0031976926,-0.024491007,-0.02795969,-0.018709868,0.01078708,-0.0004664328,-0.001993836,0.004335854,0.0074563553,0.009913339,-0.019340537,0.015109795,-0.034292664,0.009059307,-0.020444209,-0.054552928,0.0011578702,0.012613394,-0.0138353165,-0.0036427744,-0.0029562642,0.014978405,0.024123115,-0.009722824,-0.0061621685,0.013066688,0.0042176037,0.0024011435,0.008198706,0.025686651,-0.006244287,0.036394898,-0.007226424,0.021022324,0.0061950157,-0.0066647334,0.009742533,-0.0032469635,-0.001988909,0.022559581,0.0060866196,0.010307508,0.004398264,-0.0049960865,-0.017146332,0.02732902]]') as cosine_distance
FROM langchain_pg_embedding 
ORDER BY cosine_distance
LIMIT 2;